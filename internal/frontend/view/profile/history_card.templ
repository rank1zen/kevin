package profile

import (
	"context"
	"github.com/rank1zen/kevin/internal"
	"github.com/rank1zen/kevin/internal/frontend/component/accordion"
)

type HistoryCardData struct {
	MatchID                string
	ChampionID             int
	ChampionLevel          int
	SummonerIDs            [2]int
	Kills, Deaths, Assists int
	KillDeathRatio         float32
	CS                     int
	CSPerMinute            float32
	RunePage               internal.RunePage
	Items                  [7]int
	VisionScore            int
	RankChange             *internal.Rank
	LPChange               *int
	Win                    bool
}

templ HistoryCard(ctx context.Context, data HistoryCardData) {
	<div class="relative overflow-x-auto rounded-default">
		@accordion.Accordion() {
			@accordion.Card() {
				<div class="px-4 py-3 gap-y-1 gap-x-2 flex flex-wrap items-center justify-between lg:flex-nowrap">
					<div class="flex gap-x-3">
						@ChampionWidget(ctx, ChampionWidgetData{
							ChampionID:    data.ChampionID,
							ChampionLevel: data.ChampionLevel,
							SummonerIDs:   data.SummonerIDs,
						})
						@KDAWidget(ctx, KDAWidgetData{
							Kills:          data.Kills,
							Deaths:         data.Deaths,
							Assists:        data.Assists,
							KillDeathRatio: data.KillDeathRatio,
						})
						@CSWidget(ctx, CSWidgetData{
							CS:          data.CS,
							CSPerMinute: data.CSPerMinute,
						})
					</div>
					<div class="flex gap-x-2 lg:order-last">
						@RankDeltaWidget(ctx, RankDeltaWidgetData{
							RankChange: data.RankChange,
							LPChange:   data.LPChange,
							Win:        data.Win,
						})
						@accordion.Trigger()
					</div>
					<div class="flex gap-x-2 w-full justify-between lg:w-auto">
						@RuneWidget(ctx, RuneWidgetData{
							RunePage: data.RunePage,
						})
						@ItemWidget(ctx, ItemWidgetData{
							Items:       data.Items,
							VisionScore: data.VisionScore,
						})
					</div>
				</div>
			}
			@accordion.Panel() {
				// @PartialMatchDetailBox(ctx, PartialMatchDetailBoxData{
				// 	Region:  riot.RegionNA1,
				// 	MatchID: data.MatchID,
				// })
			}
		}
	</div>
}
